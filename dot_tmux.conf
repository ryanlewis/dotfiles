# Tmux configuration with vi mode

# Enable mouse support
set -g mouse on

# Enable copy-paste (works with Terminus)
set -g set-clipboard on

# Key remapping for Ctrl+_ to Shift+Tab
# Essential for Terminus on iPhone with Claude Code
# Allows switching to planning mode since Shift+Tab is unavailable on mobile
bind-key -n C-_ send-keys BTab

# Enable vi mode
setw -g mode-keys vi

# Vi-style copy mode
bind-key -T copy-mode-vi v send-keys -X begin-selection
bind-key -T copy-mode-vi y send-keys -X copy-selection-and-cancel
bind-key -T copy-mode-vi r send-keys -X rectangle-toggle

# For better clipboard integration on Linux
# bind -T copy-mode-vi y send-keys -X copy-pipe-and-cancel 'xclip -in -selection clipboard'

# Vi-style pane navigation
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Vi-style pane resizing
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# Better prefix key (Ctrl-a instead of Ctrl-b)
unbind C-b
set-option -g prefix C-a
bind-key C-a send-prefix

# Start windows and panes at 1, not 0
set -g base-index 1
setw -g pane-base-index 1

# Enable focus events (needed for some terminal features)
set -g focus-events on

# Alt-R to cycle to next window
bind-key -n M-r next-window

# Increase scrollback buffer
set -g history-limit 50000

# Enable true colors
set -g default-terminal "screen-256color"
set -ga terminal-overrides ",xterm-256color:Tc"

# ╭─────────────────────────────────────────────────────────╮
# │                     Status Bar Theme                     │
# ╰─────────────────────────────────────────────────────────╯

# Status bar position
set -g status-position bottom

# Refresh rate (seconds)
set -g status-interval 1

# Status bar colors - Dracula inspired theme
set -g status-style 'bg=#282a36 fg=#f8f8f2'

# Status bar length
set -g status-left-length 60
set -g status-right-length 100

# Window status alignment
set -g status-justify centre

# ─────────────────────── Left Status ───────────────────────
# Session, window, pane info with Nerd Font icons
set -g status-left '#{?client_prefix,#[fg=#282a36]#[bg=#ff5555]#[bold]  PREFIX #[fg=#ff5555]#[bg=#44475a],#[fg=#bd93f9,bg=#44475a,bold]  #S #[fg=#44475a,bg=#282a36]}#[fg=#f8f8f2]  #I:#P #{?window_zoomed_flag, ,}'

# ────────────────────── Window Status ──────────────────────
# Default window
setw -g window-status-style 'fg=#6272a4 bg=#282a36'
setw -g window-status-format ' #I: #W '

# Active window
setw -g window-status-current-style 'fg=#282a36 bg=#50fa7b bold'
setw -g window-status-current-format '#[fg=#282a36,bg=#50fa7b]#[fg=#282a36] #I: #W #[fg=#50fa7b,bg=#282a36]'

# Window with activity
setw -g window-status-activity-style 'fg=#ffb86c bg=#282a36 bold'

# ────────────────────── Right Status ───────────────────────
# Hostname with Nerd Font icon
set -g status-right '#[fg=#bd93f9,bg=#282a36]#[fg=#282a36,bg=#bd93f9,bold]  #h '

# ─────────────────────── Pane Borders ──────────────────────
set -g pane-border-style 'fg=#44475a'
set -g pane-active-border-style 'fg=#bd93f9'

# Messages
set -g message-style 'fg=#282a36 bg=#f1fa8c bold'

# ╭─────────────────────────────────────────────────────────╮
# │                  Alternative Themes                      │
# │            Uncomment one to use instead                  │
# ╰─────────────────────────────────────────────────────────╯

# ──────────────────── Tokyo Night Theme ────────────────────
# set -g status-style 'bg=#1a1b26 fg=#a9b1d6'
# set -g status-left '#{?client_prefix,#[fg=#1a1b26]#[bg=#f7768e]#[bold]  PREFIX #[fg=#f7768e]#[bg=#24283b],#[fg=#7aa2f7,bg=#24283b,bold]  #S #[fg=#24283b,bg=#1a1b26]}#[fg=#a9b1d6]  #I:#P #{?window_zoomed_flag, ,}'
# setw -g window-status-style 'fg=#565f89 bg=#1a1b26'
# setw -g window-status-format ' #I: #W '
# setw -g window-status-current-style 'fg=#1a1b26 bg=#7aa2f7 bold'
# setw -g window-status-current-format '#[fg=#1a1b26,bg=#7aa2f7]#[fg=#1a1b26] #I: #W #[fg=#7aa2f7,bg=#1a1b26]'
# set -g status-right '#[fg=#7aa2f7,bg=#1a1b26]#[fg=#1a1b26,bg=#7aa2f7,bold]  #h '
# set -g pane-border-style 'fg=#24283b'
# set -g pane-active-border-style 'fg=#7aa2f7'
# set -g message-style 'fg=#1a1b26 bg=#7aa2f7 bold'

# ─────────────────── Catppuccin Mocha Theme ─────────────────
# set -g status-style 'bg=#1e1e2e fg=#cdd6f4'
# set -g status-left '#{?client_prefix,#[fg=#1e1e2e]#[bg=#f38ba8]#[bold]  PREFIX #[fg=#f38ba8]#[bg=#313244],#[fg=#cba6f7,bg=#313244,bold]  #S #[fg=#313244,bg=#1e1e2e]}#[fg=#cdd6f4]  #I:#P #{?window_zoomed_flag, ,}'
# setw -g window-status-style 'fg=#6c7086 bg=#1e1e2e'
# setw -g window-status-format ' #I: #W '
# setw -g window-status-current-style 'fg=#1e1e2e bg=#89b4fa bold'
# setw -g window-status-current-format '#[fg=#1e1e2e,bg=#89b4fa]#[fg=#1e1e2e] #I: #W #[fg=#89b4fa,bg=#1e1e2e]'
# set -g status-right '#[fg=#cba6f7,bg=#1e1e2e]#[fg=#1e1e2e,bg=#cba6f7,bold]  #h '
# set -g pane-border-style 'fg=#313244'
# set -g pane-active-border-style 'fg=#cba6f7'
# set -g message-style 'fg=#1e1e2e bg=#a6e3a1 bold'

# ───────────────────── Nord Theme ─────────────────────
# set -g status-style 'bg=#2e3440 fg=#eceff4'
# set -g status-left '#{?client_prefix,#[fg=#2e3440]#[bg=#bf616a]#[bold]  PREFIX #[fg=#bf616a]#[bg=#3b4252],#[fg=#88c0d0,bg=#3b4252,bold]  #S #[fg=#3b4252,bg=#2e3440]}#[fg=#eceff4]  #I:#P #{?window_zoomed_flag, ,}'
# setw -g window-status-style 'fg=#4c566a bg=#2e3440'
# setw -g window-status-format ' #I: #W '
# setw -g window-status-current-style 'fg=#2e3440 bg=#88c0d0 bold'
# setw -g window-status-current-format '#[fg=#2e3440,bg=#88c0d0]#[fg=#2e3440] #I: #W #[fg=#88c0d0,bg=#2e3440]'
# set -g status-right '#[fg=#5e81ac,bg=#2e3440]#[fg=#eceff4,bg=#5e81ac,bold]  #h '
# set -g pane-border-style 'fg=#3b4252'
# set -g pane-active-border-style 'fg=#88c0d0'
# set -g message-style 'fg=#2e3440 bg=#a3be8c bold'

# ──────────────── Nerd Font Icons Reference ──────────────
# Icons used in this configuration:
#  (session/window)  (folder)  (calendar)  (clock)  (hostname)
#  (zoom indicator)  (keyboard/prefix indicator)
# Powerline separators:
#  (left separator)  (right separator)
#  (left thin separator)  (right thin separator)
# Additional useful icons:
#  (git branch)  (terminal)  (user)  (CPU)  (memory)

# ──────────────────── Gruvbox Dark Theme ────────────────────
# A more advanced theme with powerline separators
# set -g status-style 'bg=#282828 fg=#ebdbb2'
# set -g status-left '#{?client_prefix,#[fg=#282828]#[bg=#fb4934]#[bold]  PREFIX #[fg=#fb4934]#[bg=#3c3836],#[fg=#282828,bg=#b8bb26,bold]  #S #[fg=#b8bb26,bg=#3c3836]}#[fg=#ebdbb2]  #I:#P #{?window_zoomed_flag, ,}'
# setw -g window-status-style 'fg=#a89984 bg=#282828'
# setw -g window-status-format '#[fg=#282828,bg=#3c3836]#[fg=#a89984] #I: #W #[fg=#3c3836,bg=#282828]'
# setw -g window-status-current-style 'fg=#282828 bg=#fabd2f bold'
# setw -g window-status-current-format '#[fg=#282828,bg=#fabd2f]#[fg=#282828] #I: #W #[fg=#fabd2f,bg=#282828]'
# set -g status-right '#[fg=#b8bb26,bg=#282828]#[fg=#282828,bg=#b8bb26,bold]  #h '
# set -g pane-border-style 'fg=#3c3836'
# set -g pane-active-border-style 'fg=#b8bb26'
# set -g message-style 'fg=#282828 bg=#fabd2f bold'